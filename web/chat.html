<html>
<head>
    <title>ChatBook</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"
          id="bootstrap-css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css"
          rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/chat_style.css"/>
    <script type="text/javascript" src="../eel.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/current_time.js"></script>


</head>
<body>
<script>
    get_chats();
    window.setInterval(async function() {
        var status_is_update = await get_is_update();

        if (status_is_update){
            if (g_selected_active_chat_real != "" && g_selected_active_chat_shown != ""){
                get_chats();
                get_chat_messages(g_selected_active_chat_real, g_selected_active_chat_shown, "False");
            }
        }
    }, 500)
</script>

<div class="container">
    <script>say_hello_to_username();</script>
    <div id="say-hello"></div>
    <div class="messaging">
        <div class="inbox_msg">
            <div class="inbox_people">
                <div class="headind_srch">
                    <div class="recent_heading">
                        <h4>Recent Chats</h4>
                        <div class="srch_bar">
                            <div class="stylish-input-group">
                                <!-- Log out button !-->
                                <button
                                        type="button" id="log-out" onclick="log_out()"><i class="fa fa-sign-out"></i>
                                </button>

                                <!-- Input of enter username/s !-->
                                <input id="create-chats" type="text" onkeyup="check_create_group(this.value);" placeholder="Enter username/s">

                                <span class="input-group-addon">

                            <!-- Create new chat button !-->
                            <button
                                    id="plus_icon" type="button" onclick="create_chat()"> <i class="fa fa-plus-circle" aria-hidden="true"></i>
                            </button>
                            <!-- A field of an input if the user wants to create a group and not a private chat !-->
                            <div id="create_chat_group_name"></div>

                            <!-- Errors if the user didn't fill out one of the fields !-->
                            <div id="error_usernames" style="color: red; margin-right: 30px;"></div>
                            <div id="error_group_name" style="color: red; margin-right: 25px;"></div>
                </span></div>
                        </div>
                        <!-- Clock of the current time !-->
                        <div id="current_time"></div>

                        <!-- A script that runs the function of the clock !-->
                        <script>startTime()</script>
                    </div>

                </div>

                <div class="inbox_chat" id="inbox_chat">
                    <div class="chat_list active_chat">
                        <div class="chat_people"></div>
                    </div>
                </div>
            </div>
            <div id="mesgs" class="mesgs">

                <!-- The name of the conversation !-->
                <div id="name_of_chat_div">
                    <h1 id="name_of_chat"></h1>
                    <div id="is_connected"></div>
                </div>

                <br>
                <div class="msg_history" id="msg_history">
                    <div class="incoming_msg">
                        <div class="incoming_msg_img">
                            <div class="received_msg">
                                <div class="received_withd_msg">
                                    <span class="time_date"></span></div>
                            </div>
                        </div>
                        <div class="outgoing_msg">
                            <div class="sent_msg">
                                <span class="time_date"></span></div>
                        </div>
                    </div>
                </div>
                <div class="type_msg">
                    <div class="input_msg_write">
                        <!-- An input where the user writes the content of his message !-->
                        <input type="text" class="write_msg" id="input_write_msg" placeholder="Type a message"/>

                        <!-- if the content of the message is empty - an error message will be shown !-->
                        <div id="error_content_message" style="color: red;"></div>

                        <!-- An icon, when the user clicks it - the function send_message() will be called !-->
                        <button class="msg_send_btn" type="button" onclick="send_message();"><i
                                class="fa fa-paper-plane-o"
                                aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>